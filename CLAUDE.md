# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Checkmind is a React Native mobile application built with Expo SDK 54 and Expo Router for file-based navigation. The app uses TypeScript with strict mode and supports iOS, Android, and Web platforms. It features a white-focused minimal design with a primary green color (#1E9E55).

## Development Commands

```bash
# Start development server
npm start

# Run on specific platforms
npm run ios
npm run android
npm run web
```

## Architecture

### File-Based Routing (Expo Router)

The application uses Expo Router v6 with file-based routing and typed routes enabled:

- **`app/_layout.tsx`**: Root layout with Stack navigation, ThemeProvider, and font loading
- **`app/(tabs)/_layout.tsx`**: Tab navigation layout with icon configuration
- **`app/(tabs)/index.tsx`**: First tab screen (Tab One)
- **`app/(tabs)/two.tsx`**: Second tab screen (Tab Two)
- **`app/modal.tsx`**: Modal screen accessible via Stack navigation
- **`app/+not-found.tsx`**: 404 error boundary
- **`app/+html.tsx`**: Custom HTML wrapper for web

Route groups use parentheses `(tabs)` to organize routes without affecting the URL structure. The initial route is set to `(tabs)` via `unstable_settings`.

### Design System Architecture

The design system is centralized in `constants/` with a comprehensive token-based approach:

**Entry Point**: Import from `@/constants` using the path alias configured in `tsconfig.json`.

**Core Design Tokens**:

- **`Colors.ts`**: Exports both named `Colors` object and default theme
  - Primary colors with light/dark variants
  - White-based neutral scale (gray50-gray900)
  - Semantic colors (success, warning, error, info)
  - Context-specific tokens (background, text, border)
  - Light/dark theme configurations

- **`Typography.ts`**: Platform-aware font system
  - Font families with iOS/Android platform detection
  - Font sizes (xs to 5xl)
  - Line heights and letter spacing
  - Typography presets (display, headings, body, labels, buttons)

- **`Spacing.ts`**: 8px grid-based spacing system
  - Spacing scale based on 4px base unit
  - Border radius, width, icon sizes
  - Shadow elevations with iOS/Android compatibility
  - Layout presets for consistent padding

- **`theme.ts`**: Unified theme object combining all tokens
  - Component style presets (buttons, cards, inputs, badges, dividers)
  - Exports TypeScript types for type-safe theme access

- **`index.ts`**: Central export for all design system tokens

### Theming System

The app supports automatic light/dark mode switching:

1. **`useColorScheme`** hook detects system preference (separate implementations for native and web)
2. **`useThemeColor`** hook in `components/Themed.tsx` provides theme-aware color resolution
3. **Themed components** (`Text`, `View`) automatically adapt to light/dark mode
4. **`@react-navigation/native`** ThemeProvider wraps the navigation tree

Color overrides can be applied per-component using `lightColor` and `darkColor` props on Themed components.

### Component Patterns

**Themed Components** (`components/Themed.tsx`):
- Wrap React Native primitives with automatic theme color application
- Accept `lightColor`/`darkColor` props for per-instance overrides
- Use `useThemeColor` hook to resolve colors from theme

**useClientOnlyValue**:
- Platform-specific utility with separate native/web implementations
- Prevents hydration mismatches in React Navigation on web

**ExternalLink**:
- Wraps links with `expo-web-browser` for in-app browsing on native
- Falls back to standard linking on web

### Platform Configuration

**Expo Configuration** (`app.json`):
- New Architecture enabled for React Native performance improvements
- Typed routes enabled for type-safe navigation
- Edge-to-edge display on Android
- Automatic orientation locked to portrait
- Splash screen with white background (#ffffff)

**TypeScript Configuration**:
- Extends `expo/tsconfig.base`
- Strict mode enabled
- Path alias `@/*` maps to project root
- Includes Expo-generated types from `.expo/types/`

### Asset Management

- **Fonts**: Custom fonts loaded via `expo-font` (SpaceMono) + FontAwesome icons
- **Images**: Located in `assets/images/` (icon, splash, adaptive-icon, favicon)
- **Font Loading**: Handled in root layout with splash screen prevention until assets load

### Native Folders

The `/ios` and `/android` folders are gitignored and generated by Expo when needed. Use `expo prebuild` if manual native configuration is required, but prefer staying in the managed workflow.

## Key Dependencies

- **expo-router**: File-based navigation with Stack and Tabs
- **react-native-reanimated**: Animations (worklets enabled)
- **@expo/vector-icons**: Icon library (FontAwesome)
- **expo-constants**, **expo-linking**: Platform utilities
- **react-native-safe-area-context**: Safe area handling
- **react-native-screens**: Native navigation performance

## Design System Usage

```typescript
// Import design tokens
import { theme, Colors, Typography, Spacing } from '@/constants';

// Use color tokens
<View style={{ backgroundColor: Colors.primary.main }}>
  <Text style={{ color: Colors.text.primary }}>Hello</Text>
</View>

// Use typography presets
<Text style={Typography.h1}>Heading</Text>
<Text style={Typography.body}>Body text</Text>

// Use component styles from theme
<TouchableOpacity style={theme.components.button.primary}>
  <Text style={{ ...Typography.button, color: Colors.primary.contrast }}>
    Button
  </Text>
</TouchableOpacity>

// Use spacing tokens
<View style={{
  padding: Spacing.base,
  gap: Spacing.md,
  borderRadius: theme.borderRadius.lg,
  ...theme.shadow.base
}}>
```

## Development Notes

- The app uses React 19.1.0 with React Native 0.81.5
- Metro bundler is used for web builds (configured in `app.json`)
- TypeScript strict mode is enforced project-wide
- Platform-specific code uses `.web.ts` extension for web variants
- ErrorBoundary is exported from `expo-router` in root layout
